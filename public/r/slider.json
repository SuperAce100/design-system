{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "slider",
  "type": "registry:component",
  "title": "Slider",
  "description": "An input-like slider with inline value editing on double click.",
  "dependencies": [
    "@radix-ui/react-slider"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/slider/slider.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport * as SliderPrimitive from \"@radix-ui/react-slider\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst clamp = (value: number, min: number, max: number) => Math.min(max, Math.max(min, value));\n\nconst getStepPrecision = (step: number) => {\n  const stepText = step.toString();\n  if (stepText.includes(\"e-\")) {\n    const [, exponent = \"0\"] = stepText.split(\"e-\");\n    return Number.parseInt(exponent, 10) || 0;\n  }\n\n  const [, decimals = \"\"] = stepText.split(\".\");\n  return decimals.length;\n};\n\nconst resolveStep = (step: number | undefined) =>\n  Number.isFinite(step) && (step ?? 0) > 0 ? (step as number) : 1;\n\nconst snapToStep = (value: number, min: number, max: number, step: number) => {\n  const normalized = clamp(value, min, max);\n  const precision = Math.min(getStepPrecision(step) + 2, 8);\n  const snapped = Math.round((normalized - min) / step) * step + min;\n  return Number(clamp(snapped, min, max).toFixed(precision));\n};\n\nconst formatValue = (value: number, step: number) => {\n  const precision = Math.min(getStepPrecision(step), 4);\n  if (precision === 0) {\n    return `${Math.round(value)}`;\n  }\n  return value.toFixed(precision).replace(/\\.0+$/, \"\").replace(/(\\.\\d*?)0+$/, \"$1\");\n};\n\nconst sliderSurfaceClassName =\n  \"border-input dark:bg-input/30 rounded-xl border bg-transparent shadow-md shadow-shade transition-all duration-150 ease-out hover:bg-muted hover:border-border/0 hover:shadow-none\";\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(\n  (\n    {\n      className,\n      value,\n      defaultValue,\n      min = 0,\n      max = 100,\n      step,\n      disabled,\n      onValueChange,\n      onValueCommit,\n      onDoubleClick,\n      ...props\n    },\n    ref\n  ) => {\n    const safeStep = resolveStep(step);\n    const isControlled = value !== undefined;\n\n    const initialValues = React.useMemo(() => defaultValue ?? [min], [defaultValue, min]);\n    const [internalValues, setInternalValues] = React.useState<number[]>(initialValues);\n    const values = React.useMemo(\n      () => (isControlled ? (value ?? [min]) : internalValues),\n      [internalValues, isControlled, min, value]\n    );\n    const primaryValue = values[0] ?? min;\n\n    const [isEditing, setIsEditing] = React.useState(false);\n    const [draftValue, setDraftValue] = React.useState(formatValue(primaryValue, safeStep));\n    const inputRef = React.useRef<HTMLInputElement | null>(null);\n\n    React.useEffect(() => {\n      if (!isControlled) {\n        setInternalValues(initialValues);\n      }\n    }, [initialValues, isControlled]);\n\n    React.useEffect(() => {\n      if (!isEditing) {\n        setDraftValue(formatValue(primaryValue, safeStep));\n      }\n    }, [isEditing, primaryValue, safeStep]);\n\n    React.useEffect(() => {\n      if (!isEditing) {\n        return;\n      }\n\n      inputRef.current?.focus();\n      inputRef.current?.select();\n    }, [isEditing]);\n\n    const emitValues = (nextValues: number[], options?: { commit?: boolean }) => {\n      if (!isControlled) {\n        setInternalValues(nextValues);\n      }\n\n      onValueChange?.(nextValues);\n      if (options?.commit) {\n        onValueCommit?.(nextValues);\n      }\n    };\n\n    const handleDoubleClick: React.MouseEventHandler<HTMLElement> = (event) => {\n      (onDoubleClick as React.MouseEventHandler<HTMLElement> | undefined)?.(event);\n      if (event.defaultPrevented || disabled) {\n        return;\n      }\n\n      setDraftValue(formatValue(primaryValue, safeStep));\n      setIsEditing(true);\n    };\n\n    const commitInput = (cancel = false) => {\n      if (cancel) {\n        setIsEditing(false);\n        return;\n      }\n\n      const parsed = Number.parseFloat(draftValue);\n      if (Number.isNaN(parsed)) {\n        setIsEditing(false);\n        return;\n      }\n\n      const nextValues = values.length > 0 ? [...values] : [min];\n      nextValues[0] = snapToStep(parsed, min, max, safeStep);\n      emitValues(nextValues, { commit: true });\n      setIsEditing(false);\n    };\n\n    if (isEditing) {\n      return (\n        <input\n          ref={inputRef}\n          type=\"number\"\n          step={safeStep}\n          min={min}\n          max={max}\n          value={draftValue}\n          data-slot=\"slider-input\"\n          className={cn(\n            \"h-10 w-full px-3 py-2 text-center text-sm font-medium outline-none\",\n            \"focus-visible:border-primary focus-visible:ring-primary/30 focus-visible:ring-[3px]\",\n            sliderSurfaceClassName,\n            className\n          )}\n          onChange={(event) => {\n            setDraftValue(event.target.value);\n          }}\n          onBlur={() => {\n            commitInput();\n          }}\n          onKeyDown={(event) => {\n            if (event.key === \"Enter\") {\n              event.preventDefault();\n              commitInput();\n              return;\n            }\n\n            if (event.key === \"Escape\") {\n              event.preventDefault();\n              commitInput(true);\n            }\n          }}\n        />\n      );\n    }\n\n    return (\n      <SliderPrimitive.Root\n        ref={ref}\n        data-slot=\"slider\"\n        min={min}\n        max={max}\n        step={safeStep}\n        value={value}\n        defaultValue={defaultValue}\n        disabled={disabled}\n        className={cn(\n          \"relative flex h-10 w-full touch-none items-center px-1.5\",\n          \"focus-within:border-primary focus-within:ring-primary/30 focus-within:ring-[3px]\",\n          \"disabled:pointer-events-none disabled:opacity-50\",\n          sliderSurfaceClassName,\n          className\n        )}\n        onValueChange={(nextValues) => {\n          emitValues(nextValues);\n        }}\n        onValueCommit={onValueCommit}\n        onDoubleClick={handleDoubleClick}\n        {...props}\n      >\n        <SliderPrimitive.Track className=\"relative h-full w-full overflow-hidden rounded-[0.65rem]\">\n          <SliderPrimitive.Range className=\"absolute h-full bg-primary/30\" />\n        </SliderPrimitive.Track>\n        {(values.length ? values : [min]).map((_, index) => (\n          <SliderPrimitive.Thumb\n            key={`thumb-${index}`}\n            className={cn(\n              \"block w-0.5 rounded-full border-0 bg-primary\",\n              \"h-[calc(100%-8px)] shadow-none\",\n              \"focus-visible:outline-none\"\n            )}\n          />\n        ))}\n      </SliderPrimitive.Root>\n    );\n  }\n);\n\nSlider.displayName = \"Slider\";\n\nexport { Slider };\n",
      "type": "registry:component",
      "target": "components/ui/slider.tsx"
    }
  ]
}